USE petersjo_dpp;

-- =====================================================
-- TESTDATA: Items (Fas 2 - RFID artikelnivå)
-- =====================================================
-- tid: RFID-chippets fabriksid (24-teckens hex, 96-bit EPC)
-- sgtin: GS1 SGTIN = GTIN + serienummer (format: GTIN.NNNNNN)
-- =====================================================

-- Batches från 05_testdata_continued.sql:
-- batch_id 1: product_variant_id 2  (Scrubs Tunika S, Ceil Blue) - VGR  - GTIN: 7350012345001
-- batch_id 2: product_variant_id 3  (Scrubs Tunika M, Ceil Blue) - VGR  - GTIN: 7350012345001
-- batch_id 3: product_variant_id 4  (Scrubs Tunika L, Ceil Blue) - VGR  - GTIN: 7350012345001
-- batch_id 8: product_variant_id 18 (Labbrock M, White) - Karolinska    - GTIN: 7350012345003

-- =====================================================
-- BATCH 1: VGR Scrubs Tunika S (15 st)
-- =====================================================
INSERT INTO items (batch_id, product_variant_id, tid, sgtin, created_at) VALUES
(1, 2, '3034257BF400000000000001', '7350012345001.000001', '2025-01-15 08:00:00'),
(1, 2, '3034257BF400000000000002', '7350012345001.000002', '2025-01-15 08:00:01'),
(1, 2, '3034257BF400000000000003', '7350012345001.000003', '2025-01-15 08:00:02'),
(1, 2, '3034257BF400000000000004', '7350012345001.000004', '2025-01-15 08:00:03'),
(1, 2, '3034257BF400000000000005', '7350012345001.000005', '2025-01-15 08:00:04'),
(1, 2, '3034257BF400000000000006', '7350012345001.000006', '2025-01-15 08:00:05'),
(1, 2, '3034257BF400000000000007', '7350012345001.000007', '2025-01-15 08:00:06'),
(1, 2, '3034257BF400000000000008', '7350012345001.000008', '2025-01-15 08:00:07'),
(1, 2, '3034257BF400000000000009', '7350012345001.000009', '2025-01-15 08:00:08'),
(1, 2, '3034257BF40000000000000A', '7350012345001.000010', '2025-01-15 08:00:09'),
(1, 2, '3034257BF40000000000000B', '7350012345001.000011', '2025-01-15 08:00:10'),
(1, 2, '3034257BF40000000000000C', '7350012345001.000012', '2025-01-15 08:00:11'),
(1, 2, '3034257BF40000000000000D', '7350012345001.000013', '2025-01-15 08:00:12'),
(1, 2, '3034257BF40000000000000E', '7350012345001.000014', '2025-01-15 08:00:13'),
(1, 2, '3034257BF40000000000000F', '7350012345001.000015', '2025-01-15 08:00:14');

-- =====================================================
-- BATCH 2: VGR Scrubs Tunika M (15 st)
-- =====================================================
INSERT INTO items (batch_id, product_variant_id, tid, sgtin, created_at) VALUES
(2, 3, '3034257BF400000000000101', '7350012345001.000101', '2025-01-15 09:00:00'),
(2, 3, '3034257BF400000000000102', '7350012345001.000102', '2025-01-15 09:00:01'),
(2, 3, '3034257BF400000000000103', '7350012345001.000103', '2025-01-15 09:00:02'),
(2, 3, '3034257BF400000000000104', '7350012345001.000104', '2025-01-15 09:00:03'),
(2, 3, '3034257BF400000000000105', '7350012345001.000105', '2025-01-15 09:00:04'),
(2, 3, '3034257BF400000000000106', '7350012345001.000106', '2025-01-15 09:00:05'),
(2, 3, '3034257BF400000000000107', '7350012345001.000107', '2025-01-15 09:00:06'),
(2, 3, '3034257BF400000000000108', '7350012345001.000108', '2025-01-15 09:00:07'),
(2, 3, '3034257BF400000000000109', '7350012345001.000109', '2025-01-15 09:00:08'),
(2, 3, '3034257BF40000000000010A', '7350012345001.000110', '2025-01-15 09:00:09'),
(2, 3, '3034257BF40000000000010B', '7350012345001.000111', '2025-01-15 09:00:10'),
(2, 3, '3034257BF40000000000010C', '7350012345001.000112', '2025-01-15 09:00:11'),
(2, 3, '3034257BF40000000000010D', '7350012345001.000113', '2025-01-15 09:00:12'),
(2, 3, '3034257BF40000000000010E', '7350012345001.000114', '2025-01-15 09:00:13'),
(2, 3, '3034257BF40000000000010F', '7350012345001.000115', '2025-01-15 09:00:14');

-- =====================================================
-- BATCH 3: VGR Scrubs Tunika L (10 st)
-- =====================================================
INSERT INTO items (batch_id, product_variant_id, tid, sgtin, created_at) VALUES
(3, 4, '3034257BF400000000000201', '7350012345001.000201', '2025-01-15 10:00:00'),
(3, 4, '3034257BF400000000000202', '7350012345001.000202', '2025-01-15 10:00:01'),
(3, 4, '3034257BF400000000000203', '7350012345001.000203', '2025-01-15 10:00:02'),
(3, 4, '3034257BF400000000000204', '7350012345001.000204', '2025-01-15 10:00:03'),
(3, 4, '3034257BF400000000000205', '7350012345001.000205', '2025-01-15 10:00:04'),
(3, 4, '3034257BF400000000000206', '7350012345001.000206', '2025-01-15 10:00:05'),
(3, 4, '3034257BF400000000000207', '7350012345001.000207', '2025-01-15 10:00:06'),
(3, 4, '3034257BF400000000000208', '7350012345001.000208', '2025-01-15 10:00:07'),
(3, 4, '3034257BF400000000000209', '7350012345001.000209', '2025-01-15 10:00:08'),
(3, 4, '3034257BF40000000000020A', '7350012345001.000210', '2025-01-15 10:00:09');

-- =====================================================
-- BATCH 8: Karolinska Labbrock M (10 st)
-- =====================================================
INSERT INTO items (batch_id, product_variant_id, tid, sgtin, created_at) VALUES
(8, 18, '3034257BF400000000001001', '7350012345003.001001', '2025-01-20 08:00:00'),
(8, 18, '3034257BF400000000001002', '7350012345003.001002', '2025-01-20 08:00:01'),
(8, 18, '3034257BF400000000001003', '7350012345003.001003', '2025-01-20 08:00:02'),
(8, 18, '3034257BF400000000001004', '7350012345003.001004', '2025-01-20 08:00:03'),
(8, 18, '3034257BF400000000001005', '7350012345003.001005', '2025-01-20 08:00:04'),
(8, 18, '3034257BF400000000001006', '7350012345003.001006', '2025-01-20 08:00:05'),
(8, 18, '3034257BF400000000001007', '7350012345003.001007', '2025-01-20 08:00:06'),
(8, 18, '3034257BF400000000001008', '7350012345003.001008', '2025-01-20 08:00:07'),
(8, 18, '3034257BF400000000001009', '7350012345003.001009', '2025-01-20 08:00:08'),
(8, 18, '3034257BF40000000000100A', '7350012345003.001010', '2025-01-20 08:00:09');

-- =====================================================
-- UTÖKAD TESTDATA
-- =====================================================
-- Befintliga batches utan items: 4, 5, 6, 7, 9, 10, 11
-- Lägger till items för dessa
-- =====================================================

-- BATCH 4: VGR Scrubs Tunika XL (product_variant_id 5)
INSERT INTO items (batch_id, product_variant_id, tid, sgtin) VALUES
(4, 5, '3034257BF400000000000301', '7350012345001.000301'),
(4, 5, '3034257BF400000000000302', '7350012345001.000302'),
(4, 5, '3034257BF400000000000303', '7350012345001.000303'),
(4, 5, '3034257BF400000000000304', '7350012345001.000304'),
(4, 5, '3034257BF400000000000305', '7350012345001.000305'),
(4, 5, '3034257BF400000000000306', '7350012345001.000306'),
(4, 5, '3034257BF400000000000307', '7350012345001.000307'),
(4, 5, '3034257BF400000000000308', '7350012345001.000308'),
(4, 5, '3034257BF400000000000309', '7350012345001.000309'),
(4, 5, '3034257BF400000000000310', '7350012345001.000310');

-- BATCH 5: VGR Scrubs Byxa S (product_variant_id 12)
INSERT INTO items (batch_id, product_variant_id, tid, sgtin) VALUES
(5, 12, '3034257BF400000000000401', '7350012345002.000401'),
(5, 12, '3034257BF400000000000402', '7350012345002.000402'),
(5, 12, '3034257BF400000000000403', '7350012345002.000403'),
(5, 12, '3034257BF400000000000404', '7350012345002.000404'),
(5, 12, '3034257BF400000000000405', '7350012345002.000405'),
(5, 12, '3034257BF400000000000406', '7350012345002.000406'),
(5, 12, '3034257BF400000000000407', '7350012345002.000407'),
(5, 12, '3034257BF400000000000408', '7350012345002.000408'),
(5, 12, '3034257BF400000000000409', '7350012345002.000409'),
(5, 12, '3034257BF400000000000410', '7350012345002.000410');

-- BATCH 6: VGR Scrubs Byxa M (product_variant_id 13)
INSERT INTO items (batch_id, product_variant_id, tid, sgtin) VALUES
(6, 13, '3034257BF400000000000501', '7350012345002.000501'),
(6, 13, '3034257BF400000000000502', '7350012345002.000502'),
(6, 13, '3034257BF400000000000503', '7350012345002.000503'),
(6, 13, '3034257BF400000000000504', '7350012345002.000504'),
(6, 13, '3034257BF400000000000505', '7350012345002.000505'),
(6, 13, '3034257BF400000000000506', '7350012345002.000506'),
(6, 13, '3034257BF400000000000507', '7350012345002.000507'),
(6, 13, '3034257BF400000000000508', '7350012345002.000508'),
(6, 13, '3034257BF400000000000509', '7350012345002.000509'),
(6, 13, '3034257BF400000000000510', '7350012345002.000510');

-- BATCH 7: VGR Scrubs Byxa L (product_variant_id 14)
INSERT INTO items (batch_id, product_variant_id, tid, sgtin) VALUES
(7, 14, '3034257BF400000000000601', '7350012345002.000601'),
(7, 14, '3034257BF400000000000602', '7350012345002.000602'),
(7, 14, '3034257BF400000000000603', '7350012345002.000603'),
(7, 14, '3034257BF400000000000604', '7350012345002.000604'),
(7, 14, '3034257BF400000000000605', '7350012345002.000605'),
(7, 14, '3034257BF400000000000606', '7350012345002.000606'),
(7, 14, '3034257BF400000000000607', '7350012345002.000607'),
(7, 14, '3034257BF400000000000608', '7350012345002.000608'),
(7, 14, '3034257BF400000000000609', '7350012345002.000609'),
(7, 14, '3034257BF400000000000610', '7350012345002.000610');

-- BATCH 9: Karolinska Labbrock L (product_variant_id 19)
INSERT INTO items (batch_id, product_variant_id, tid, sgtin) VALUES
(9, 19, '3034257BF400000000001101', '7350012345003.001101'),
(9, 19, '3034257BF400000000001102', '7350012345003.001102'),
(9, 19, '3034257BF400000000001103', '7350012345003.001103'),
(9, 19, '3034257BF400000000001104', '7350012345003.001104'),
(9, 19, '3034257BF400000000001105', '7350012345003.001105'),
(9, 19, '3034257BF400000000001106', '7350012345003.001106'),
(9, 19, '3034257BF400000000001107', '7350012345003.001107'),
(9, 19, '3034257BF400000000001108', '7350012345003.001108'),
(9, 19, '3034257BF400000000001109', '7350012345003.001109'),
(9, 19, '3034257BF400000000001110', '7350012345003.001110');

-- BATCH 10: SU Patientskjorta M (product_variant_id 22)
INSERT INTO items (batch_id, product_variant_id, tid, sgtin) VALUES
(10, 22, '3034257BF400000000001201', '7350012345004.001201'),
(10, 22, '3034257BF400000000001202', '7350012345004.001202'),
(10, 22, '3034257BF400000000001203', '7350012345004.001203'),
(10, 22, '3034257BF400000000001204', '7350012345004.001204'),
(10, 22, '3034257BF400000000001205', '7350012345004.001205'),
(10, 22, '3034257BF400000000001206', '7350012345004.001206'),
(10, 22, '3034257BF400000000001207', '7350012345004.001207'),
(10, 22, '3034257BF400000000001208', '7350012345004.001208'),
(10, 22, '3034257BF400000000001209', '7350012345004.001209'),
(10, 22, '3034257BF400000000001210', '7350012345004.001210');

-- BATCH 11: VGR Operationsrock M (product_variant_id 25)
INSERT INTO items (batch_id, product_variant_id, tid, sgtin) VALUES
(11, 25, '3034257BF400000000001301', '7350012345005.001301'),
(11, 25, '3034257BF400000000001302', '7350012345005.001302'),
(11, 25, '3034257BF400000000001303', '7350012345005.001303'),
(11, 25, '3034257BF400000000001304', '7350012345005.001304'),
(11, 25, '3034257BF400000000001305', '7350012345005.001305'),
(11, 25, '3034257BF400000000001306', '7350012345005.001306'),
(11, 25, '3034257BF400000000001307', '7350012345005.001307'),
(11, 25, '3034257BF400000000001308', '7350012345005.001308'),
(11, 25, '3034257BF400000000001309', '7350012345005.001309'),
(11, 25, '3034257BF400000000001310', '7350012345005.001310');

-- =====================================================
-- FLER BATCHES FÖR VARIANTER SOM SAKNAR
-- =====================================================

-- Navy-varianter (Scrubs Tunika)
INSERT INTO batches (product_variant_id, batch_number, po_number, production_date, quantity, _status) VALUES
(6, 'BATCH-2025-VGR-012', 'PO-VGR-2025-0060', '2025-02-01', 200, 'completed'),
(7, 'BATCH-2025-VGR-013', 'PO-VGR-2025-0060', '2025-02-01', 300, 'completed'),
(8, 'BATCH-2025-VGR-014', 'PO-VGR-2025-0060', '2025-02-01', 250, 'completed');

-- Wine-varianter (Scrubs Tunika)
INSERT INTO batches (product_variant_id, batch_number, po_number, production_date, quantity, _status) VALUES
(9, 'BATCH-2025-VGR-015', 'PO-VGR-2025-0061', '2025-02-05', 150, 'completed'),
(10, 'BATCH-2025-VGR-016', 'PO-VGR-2025-0061', '2025-02-05', 200, 'completed');

-- Hämta nya batch-IDs och lägg till items
-- (Antag att nya batches får ID 12-16)

-- BATCH 12: Navy S
INSERT INTO items (batch_id, product_variant_id, tid, sgtin) VALUES
(12, 6, '3034257BF400000000002001', '7350012345001.002001'),
(12, 6, '3034257BF400000000002002', '7350012345001.002002'),
(12, 6, '3034257BF400000000002003', '7350012345001.002003'),
(12, 6, '3034257BF400000000002004', '7350012345001.002004'),
(12, 6, '3034257BF400000000002005', '7350012345001.002005');

-- BATCH 13: Navy M
INSERT INTO items (batch_id, product_variant_id, tid, sgtin) VALUES
(13, 7, '3034257BF400000000002101', '7350012345001.002101'),
(13, 7, '3034257BF400000000002102', '7350012345001.002102'),
(13, 7, '3034257BF400000000002103', '7350012345001.002103'),
(13, 7, '3034257BF400000000002104', '7350012345001.002104'),
(13, 7, '3034257BF400000000002105', '7350012345001.002105');

-- BATCH 14: Navy L
INSERT INTO items (batch_id, product_variant_id, tid, sgtin) VALUES
(14, 8, '3034257BF400000000002201', '7350012345001.002201'),
(14, 8, '3034257BF400000000002202', '7350012345001.002202'),
(14, 8, '3034257BF400000000002203', '7350012345001.002203'),
(14, 8, '3034257BF400000000002204', '7350012345001.002204'),
(14, 8, '3034257BF400000000002205', '7350012345001.002205');

-- BATCH 15: Wine M
INSERT INTO items (batch_id, product_variant_id, tid, sgtin) VALUES
(15, 9, '3034257BF400000000002301', '7350012345001.002301'),
(15, 9, '3034257BF400000000002302', '7350012345001.002302'),
(15, 9, '3034257BF400000000002303', '7350012345001.002303'),
(15, 9, '3034257BF400000000002304', '7350012345001.002304'),
(15, 9, '3034257BF400000000002305', '7350012345001.002305');

-- BATCH 16: Wine L
INSERT INTO items (batch_id, product_variant_id, tid, sgtin) VALUES
(16, 10, '3034257BF400000000002401', '7350012345001.002401'),
(16, 10, '3034257BF400000000002402', '7350012345001.002402'),
(16, 10, '3034257BF400000000002403', '7350012345001.002403'),
(16, 10, '3034257BF400000000002404', '7350012345001.002404'),
(16, 10, '3034257BF400000000002405', '7350012345001.002405');

-- =====================================================
-- BATCH_MATERIALS FÖR NYA BATCHES
-- =====================================================

INSERT INTO batch_materials (batch_id, factory_material_id, component_type, quantity_meters) VALUES
(12, 1, 'body_fabric', 160.00),
(13, 1, 'body_fabric', 240.00),
(14, 1, 'body_fabric', 200.00),
(15, 1, 'body_fabric', 120.00),
(16, 1, 'body_fabric', 160.00);

-- =====================================================
-- BATCH_SUPPLIERS FÖR NYA BATCHES
-- =====================================================

INSERT INTO batch_suppliers (batch_id, supplier_id, production_stage, country_of_origin) VALUES
(12, 1, 'confection', 'PT'),
(13, 1, 'confection', 'PT'),
(14, 1, 'confection', 'PT'),
(15, 1, 'confection', 'PT'),
(16, 1, 'confection', 'PT');

-- =====================================================
-- VERIFIERING
-- =====================================================

SELECT 'Totalt antal items:' as info, COUNT(*) as antal FROM items;

SELECT
    p.product_name,
    pv.color_name,
    pv.size,
    COUNT(i.id) as antal_items
FROM products p
JOIN product_variants pv ON pv.product_id = p.id
LEFT JOIN items i ON i.product_variant_id = pv.id
GROUP BY p.id, pv.id
ORDER BY p.product_name, pv.color_name, pv.size;
